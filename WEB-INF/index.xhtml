<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
				"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Startkicker - Home</title>
	<h:outputStylesheet name="css/primeflex.css" />
	<h:outputStylesheet library="css" name="style.css" />
</h:head>
<h:body>

	<div class="card">
		<h:form>
			<p:growl id="messages"/>

			<p:menubar>
				<f:facet name="options">
					<p:linkButton outcome="index" value="Home" style="margin-right:20px;" />
				</f:facet>


				<f:facet name="options">
					<p:linkButton rendered="#{loggedInUser != null}" outcome="createproject" value="Create a project" style="margin-right:20px;" />
					<p:button rendered="#{loggedInUser == null}" outcome="login" value="Login here" style="margin-right:20px;"  />
				</f:facet>

				<p:divider layout="vertical"/>


				<f:facet name="options">

					<p:linkButton  rendered="#{loggedInUser == null}" outcome="register" value="Register" style="margin-right:20px;" />

					<p:linkButton rendered="#{loggedInUser.admin == true}" outcome="admin" value="Admin" style="margin-right:20px;" />

					<p:commandButton  rendered="#{loggedInUser != null}" value="Logout"
												action="#{loginBean.logout}" style="margin-right:20px;"
									  icon="pi pi-fw pi-sign-out" styleClass="ui-button-info"></p:commandButton>
				</f:facet>
			</p:menubar>
		</h:form>
	</div>


	<h:form >
	</h:form>




	<br></br><br></br>


	<p:card>

		<h:panelGrid rendered="#{loggedInUser != null}">
			Hello
		<h:outputText value="#{loggedInUser.firstName}"></h:outputText>
<br></br><br></br>
		Is admin: <h:outputText value="#{loggedInUser.admin}"></h:outputText>
		</h:panelGrid>

		<br></br>

		<h:form>
			<p:dataTable value = "#{myAppWideBean.allUsers}" var = "user"
						 rows="10"
						 paginator="true"
						 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						 currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
						 rowsPerPageTemplate="5,10,{ShowAll|'All'}" >

				<p:column headerText="Name">
					<h:outputText value="#{user.name}" />
				</p:column>

				<p:column headerText="Firstname">
					<h:outputText value="#{user.firstName}" />
				</p:column>

				<p:column headerText="E-mail">
					<h:outputText value="#{user.email}" />

				</p:column>
			</p:dataTable>
		</h:form>
	</p:card>

	<p:card>
	<h2>Project lists</h2>

		<h:form id="projectList">
			<p:dataTable value = "#{myAppWideBean.allProjects}" var = "project"
						 rows="10"
						 paginator="true"
						 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						 currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
						 rowsPerPageTemplate="5,10,{ShowAll|'All'}" >

				<p:column headerText="Id">
					<h:outputText value="#{project.id}" />
				</p:column>

				<p:column headerText="Title">
					<h:outputText value="#{project.title}" />
				</p:column>

				<p:column headerText="Start date">
					<h:outputText value="#{project.startDate}" />

				</p:column>
				<p:column headerText="Creator">
					<h:outputText value="#{project.creator.userName}" />
				</p:column>

				<p:column headerText="View">
					<p:commandButton icon="fa fa-pencil" update=":projectList:projectView" oncomplete="PF('viewDialog').show()">
						<f:setPropertyActionListener value="#{project}" target="#{projectBean.selectedProject}"/>
					</p:commandButton>
				</p:column>

			</p:dataTable>


			<p:dialog header="View project" widgetVar="viewDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
				<p:outputPanel id="projectView" style="text-align:center;">

					<p:messages id="messages" showDetail="true" closable="true">
						<p:autoUpdate/>
					</p:messages>

					<p:panelGrid  columns="1" rendered="#{not empty projectBean.selectedProject}" columnClasses="label,value">
						<h:outputText value="id #{projectBean.selectedProject.id}"/>
						<h:outputText value="Title: " />
						<h:outputText value="#{projectBean.selectedProject.title}" />
						<h:outputText value="Description: " />
						<h:outputText escape="false"  value="#{projectBean.selectedProject.description}" />
						<h:outputText value="Funds required: " />
						<h:outputText value="#{projectBean.selectedProject.fundingTarget}EUR" />
						<h:outputText value="Start date: " />
						<h:outputText value="#{projectBean.selectedProject.startDate}"/>
						<h:outputText value="End date:" />
						<h:outputText value="#{projectBean.selectedProject.endDate}" />
						<h:outputText value="Project created by:" />
						<h:outputText value="#{projectBean.selectedProject.creator.userName}"/>


					</p:panelGrid>
					<p:commandButton value="Update" icon="fa fa-fw fa-pencil" action="#{userBean.userEdit}"/>
				</p:outputPanel>
			</p:dialog>
		</h:form>
	</p:card>

</h:body>
</html>
